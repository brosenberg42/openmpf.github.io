<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Admin Guide - OpenMPF</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Admin Guide";
    var mkdocs_page_input_path = "Admin-Manual.md";
    var mkdocs_page_url = "/Admin-Manual/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> OpenMPF</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="..">Home</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Build-Environment-Setup-Guide/">Build Guide</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Installation/">Install Guide</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../User-Guide/">User Guide</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 current">
        <a class="current" href="./">Admin Guide</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#web-ui">Web UI</a></li>
                
                    <li><a class="toctree-l4" href="#dashboard">Dashboard</a></li>
                
                    <li><a class="toctree-l4" href="#node-and-process-status">Node and Process Status</a></li>
                
                    <li><a class="toctree-l4" href="#node-configuration">Node Configuration</a></li>
                
                    <li><a class="toctree-l4" href="#properties-settings">Properties Settings</a></li>
                
                    <li><a class="toctree-l4" href="#component-registration">Component Registration</a></li>
                
            
                <li class="toctree-l3"><a href="#command-line-tools">Command Line Tools</a></li>
                
            
            </ul>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Component Documentation</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../API-Overview/">Component Overview</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../CPP-Component-API/">C++ Component API</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../Java-Component-API/">Java Component API</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../Packaging-and-Registering-a-Component/">Packaging and Registering a Component</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../REST-API/">REST API</a>
        
    </li>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">OpenMPF</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>Admin Guide</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <blockquote>
<p><strong>NOTICE:</strong> This software (or technical data) was produced for the U.S. Government under contract, and is subject to the Rights in Data-General Clause 52.227-14, Alt. IV (DEC 2007).
Copyright 2016 The MITRE Corporation. All Rights Reserved.</p>
</blockquote>
<h1 id="web-ui">Web UI</h1>
<p>The login procedure, as well as all of the pages accessible through the Workflow Manager sidebar, are the same for admin and non-admin users. Refer to the <a href="../User-Guide/">User Guide</a> for more information. The default account for an admin user has the username "admin" and password "mpfadm".</p>
<p>This document will cover the additional functionality permitted to admin users through the Admin Console pages.</p>
<h2 id="dashboard">Dashboard</h2>
<p>The landing page for an admin user is the Admin Console Dashboard page:</p>
<p><img alt="Admin Landing Page" src="../img/mpf-adm-landing.png" title="Admin Landing Page" /></p>
<p>This page displays a simplified overview of node and service status. The system health and time of the most recent server operation is displayed in the first panel. The number of available nodes in the OpenMPF cluster is displayed in the second panel. The ratio of available services is displayed out of the total number of configured services in the third panel. If for any reason one of the services isn't running, then the second panel will be colored orange or red instead of green. It will be colored orange if at least one service is running or red if no services are running. Clicking on the Total Nodes or Running Services panels will direct the user to the Node and Process Status page.</p>
<h2 id="node-and-process-status">Node and Process Status</h2>
<p>This page provides a list of all of the services that are configured to run on the OpenMPF cluster, and enables an admin user to start, stop, or restart them on an individual basis. Only an admin user can perform these actions. If a non-admin user views this page, the "Action(s)" column is not displayed.</p>
<p><img alt="Node and Process Status Page" src="../img/mpf-adm-node.png" title="Node and Process Status Page" /></p>
<h2 id="node-configuration">Node Configuration</h2>
<p>This page enables an admin user to view and edit the configuration for all nodes in the OpenMPF cluster. A non-admin user can only view the existing configuration.</p>
<p><img alt="Node Configuration Page" src="../img/Node_Configuration.jpg" title="Node Configuration Page" /></p>
<p>An admin user can add a node by using the "Add New Node" button and selecting a node in the OpenMPF cluster from the drop-down list. A node and all if its configured services can be removed by clicking the red "x" to the right of the node's hostname.</p>
<p>When a new node is added it will start with zero services and the "Add All Services" button will be displayed in the node area. Clicking it will add one instance of each service to that node.</p>
<p>An admin user can add services individually by dragging them from the "Catalog" area to the node area. The number of service instances can be increased or decreased by using the up and down arrows to the right of the service name in the node area. The admin user can also type in the number of desired instances. Setting the value to 0 will show a red strikethrough over the service name, which indicates that it will be completely removed from the node.</p>
<p>Services can be dragged from one node to another. For example, when dragging services from node A to node B, all instances of that service will be removed from node A and the same number of instances will be added to node B.</p>
<p>In order for any node or service changes to take effect, the admin user must click the "Save Config" button. Clicking the "Revert" button will undo all of the changes since the last time the configuration was saved.</p>
<p>When making changes, please be aware of the following:</p>
<ul>
<li>It may take a minute for the configuration to take effect on the server.</li>
<li>If you remove an existing service from a node, any job that service is processing will be stopped, and you will need to resubmit that job.</li>
<li>If you create a new node, its configuration will not take effect until the OpenMPF software is properly installed and started on the associated host.</li>
<li>If you delete a node, you will need to manually turn off the hardware running that node (deleting a node does not shut down the machine).</li>
</ul>
<h2 id="properties-settings">Properties Settings</h2>
<p>This page allows an admin user to view and edit various OpenMPF properties:</p>
<p><img alt="Properties Settings Page" src="../img/Properties_Settings.jpg" title="Properties Settings Page" /></p>
<p>An admin user can click inside of the "Value" field for any of the properties and type a new value. Doing so will change the color of the property to orange and display an orange icon to the right of the property name:</p>
<p><img alt="Properties Settings Page" src="../img/Properties_Settings_Timeout.jpg" title="Properties Settings Page" /></p>
<p>Note that if the admin user types in the original value of the property, or clicks the "Reset" button, then it will return back to the normal coloration.</p>
<p>WARNING: Changing the value of these properties can prevent the workflow manager from running after the web server is restarted. Also, no validation checks are performed on the user-provided values. Proceed with caution!</p>
<p>At the bottom of the properties table is the "Save Properties" button. The number of modified properties is shown in parentheses. Clicking the button will make the necessary changes to the properties file on the file system, but the changes will not take effect until the workflow manager is restarted. The saved properties will be colored blue and a blue icon will be displayed to the right of the property name. Additionally, a notification will appear at the top of the page alerting all system users that a restart is required:</p>
<p><img alt="Properties Settings Page" src="../img/Properties_Settings_Timeout_Set.jpg" title="Properties Settings Page" /></p>
<h2 id="component-registration">Component Registration</h2>
<p>This page allows an admin user to add and remove non-default components to and from the system:</p>
<p><img alt="Component Registration Page" src="../img/Component_Registration.jpg" title="Component Registration Page" /></p>
<p>A component package takes the form of a tar.gz file. An admin user can either drag and drop the file onto the "Upload a new component" dropzone area or click the dropzone area to open a file browser and select the file that way. In either case, the component will begin to be uploaded to the system. If the admin user dragged and dropped the file onto the dropzone area then the upload progress will be shown in that area. Once uploaded, the workflow manager will automatically attempt to register the component. Notification messages will appear in the upper right side of the screen to indicate success or failure if an error occurs. The "Current Components" table will display the component status.</p>
<p><img alt="Component Registration Page" src="../img/Component_Registration_Test.jpg" title="Component Registration Page" /></p>
<p>If for some reason the component package upload succeeded but the component registration failed then the admin user will be able to click the "Register" button again to try to another registration attempt. For example, the admin user may do this after reviewing the workflow manager logs and resolving any issues that prevented the component from successfully registering the first time. One reason may be that a component with the same name already exists on the system. Note that an error will also occur if the top-level directory of the component package, once extracted, already exists in the /opt/mpf/plugins directory on the system.</p>
<p>Once registered, an admin user has the option to remove the component. This will unregister it and completely remove any configured services, as well as the uploaded file and its extracted contents, from the system. Also, the component algorithm as well as any actions, tasks, and pipelines specified in the component's descriptor file will be removed when the component is removed.</p>
<p>WARNING: Any actions, tasks, or pipelines created through the Create Custom Pipelines page that make use of the algorithm, actions, or tasks specified in the descriptor file of the component being removed will also be removed. This is to prevent pipelines from not working properly once the component is removed.</p>
<h1 id="command-line-tools">Command Line Tools</h1>
<p>OpenMPF release 0.6.0 and later installs command line tools that can be accessed through a terminal on the master node of the OpenMPF cluster. All of the tools take the form of actions: <code>mpf &lt;action&gt; [options ...]</code>. Note that tab-completion is enabled for ease of use.</p>
<p>WARNING: These commands can be executed by anyone who has command line access to the master node.</p>
<p>Execute <code>mpf --help</code> for general documentation and <code>mpf &lt;action&gt; --help</code> for documentation about a specific action.</p>
<ul>
<li><strong>Start / Stop Actions</strong>: Actions for starting and stopping the OpenMPF system dependencies, including mySQL, ActiveMQ, Redis, Tomcat, and the node managers on the various nodes in the OpenMPF cluster.<ul>
<li><code>mpf status</code>: displays a message indicating whether each of the system dependencies is running or not</li>
<li><code>mpf start</code>: starts all of the system dependencies</li>
<li><code>mpf stop</code>: stops all of the system dependencies</li>
<li><code>mpf restart</code> : stops and then starts all of the system dependencies</li>
</ul>
</li>
<li><strong>User Actions</strong>: Actions for managing workflow manager user accounts. If changes are made to an existing user then that user will need to log off or the workflow manager will need to be restarted for the changes to take effect.<ul>
<li><code>mpf list-users</code> : lists all of the existing user accounts and their role (non-admin or admin)</li>
<li><code>mpf add-user &lt;username&gt; &lt;role&gt;</code>: adds a new user account; will be prompted to enter the account password</li>
<li><code>mpf remove-user &lt;username&gt;</code> : removes an existing user account</li>
<li><code>mpf change-role &lt;username&gt; &lt;role&gt;</code> : change the role (non-admin to admin or vice versa) for an existing user</li>
<li><code>mpf change-password &lt;username&gt;</code>: change the password for an existing user; will be prompted to enter the new account password</li>
</ul>
</li>
<li><strong>Clean Actions</strong>: Actions to remove old data and revert the system to a new install state. User accounts, registered components, as well as custom actions, tasks, and pipelines, are preserved.<ul>
<li><code>mpf clean</code>: cleans out old job information and results, pending job requests, marked up media files, and ActiveMQ data, but preserves log files and uploaded media</li>
<li><code>mpf clean --delete-logs --delete-uploaded-media</code>: the same as <code>mpf clean</code> but also deletes log files and uploaded media</li>
</ul>
</li>
</ul>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../API-Overview/" class="btn btn-neutral float-right" title="Component Overview">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../User-Guide/" class="btn btn-neutral" title="User Guide"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p>OpenMPF</p>
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>
    
  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../User-Guide/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../API-Overview/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script src="../js/theme.js"></script>

</body>
</html>
